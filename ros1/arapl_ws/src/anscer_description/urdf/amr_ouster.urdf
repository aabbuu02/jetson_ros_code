<?xml version ="1.0"?>
<robot name="anscer_amr">

  <!-- <physics type='ode'>
    <max_step_size>0.001</max_step_size>
    <real_time_factor>1</real_time_factor>
    <real_time_update_rate>1000</real_time_update_rate>
    <gravity>0 0 -9.8</gravity>
  </physics>
  -->

<!--
//base link -->
<link name="base_footprint">
</link>
<link name="base_link">
      <collision>
        <geometry>
          <mesh filename="package://anscer_description/meshes/amr_chassis.dae" scale="1 1 1"/>
        </geometry>
        <origin rpy="0 0 1.5708" xyz="0 0 -0.0725"/>
      </collision>
    <visual>
      <geometry>
      <mesh filename="package://anscer_description/meshes/amr_chassis.dae" scale="1 1 1"/>
      </geometry>
      <origin rpy="0 0 1.5708" xyz="0 0 -0.0725"/>
    <material name="white">
      <color rgba="1 1 0 1"/>
    </material>
  </visual>
  <inertial>
    <origin rpy="0 0 1.5708" xyz="0 0 -0.0725"/>
    <mass value="10"/>
    <inertia ixx="1" ixy="0" ixz="0"
       iyy="1" iyz="0"
       
       izz="1"/>
     </inertial>

</link>
  <joint name="base_footprint_to_base_link" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.0915" rpy="0 0 0"/>
  </joint>
<link name="base_link_dock" ></link>
<joint name="base_dock_to_base_link" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link_dock"/>
    <origin xyz="0 0 0" rpy="0 0 3.14159"/>
  </joint>


  <!-- wheel  -->
  <!--  -->

  <!--right_mWheel-->
         <joint name="right_mWheel_to_base_link" type="continuous">
         <parent link="base_link"/>
         <child link="right_mWheel"/>
         <axis xyz="0 0 1"/>
          <origin xyz="0 -.160 -0.0325" rpy="1.5708 0 3.14"/>
        </joint >

         <link name="right_mWheel">
              <collision>
                <geometry>
                    <cylinder length="0.033" radius="0.06"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
              </collision>
          <visual>
                <geometry>
                <cylinder length="0.033" radius="0.06"/>
                </geometry>
                <origin rpy="0 0 0" xyz="0 0 0"/>
            <material name="white"/>
            </visual>
            <inertial>
              <origin rpy="0 0 0" xyz="6.61391e-12 -5.48221e-18 -1.09644e-17"/>
              <mass value=".372"/>
              <inertia ixx="0.0004067" ixy="0" ixz="-3.271e-19"
                  iyy="0.0007458" iyz="-2.453e-19"
                 izz="0.0004067"/>
            </inertial>
         </link>

  <!-- left wheel -->

  <joint name="left_mWheel_to_base_link" type="continuous">
  <parent link="base_link"/>
  <child link="left_mWheel"/>
  <axis xyz="0 0 1"/>
    <origin xyz="0 .160 -0.0325" rpy="1.5708 0 3.14"/>
  </joint >

  <link name="left_mWheel">
       <collision>
         <geometry>
             <cylinder length="0.033" radius="0.06"/>
         </geometry>
         <origin rpy="0 0 0" xyz="0 0 0"/>
       </collision>
   <visual>
         <geometry>
         <cylinder length="0.033" radius="0.06"/>
         </geometry>
         <origin rpy="0 0 0" xyz="0 0 0"/>
     <material name="white"/>
     </visual>
     <inertial>
       <origin rpy="0 0 0" xyz="6.61391e-12 -5.48221e-18 -1.09644e-17"/>
       <mass value=".372"/>
       <inertia ixx="0.0004067" ixy="0" ixz="-3.271e-19"
           iyy="0.0007458" iyz="-2.453e-19"
          izz="0.0004067"/>
     </inertial>
  </link>


<!-- caster wheels -->


<joint name="front_left_casterWheel_to_base_link" type="fixed">
<parent link="base_link"/>
<child link="front_left_casterWheel"/>
<axis xyz="0 0 1"/>
 <origin xyz="0.2665 0.132 -0.0725" rpy="1.5708 0 0"/>
</joint >

<link name="front_left_casterWheel">
     <collision>
       <geometry>
           <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
     </collision>
 <visual>
       <geometry>
       <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
   <material name="white"/>
   </visual>

     <inertial>
       <origin rpy="0 0 0" xyz="0 0 0"/>
       <mass value=".10"/>
       <inertia ixx="4.11e-13" ixy="0" ixz="0"
           iyy="4.11e-13" iyz="0.0"
          izz="4.11e-13"/>

   </inertial>
</link>


<joint name="back_left_casterWheel_to_base_link" type="fixed">
<parent link="base_link"/>
<child link="back_left_casterWheel"/>
<axis xyz="0 0 1"/>
 <origin xyz="-0.2665 0.132 -0.0725" rpy="1.5708 0 0"/>
</joint >

<link name="back_left_casterWheel">
     <collision>
       <geometry>
           <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
     </collision>
 <visual>
       <geometry>
       <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
   <material name="white"/>
   </visual>

     <inertial>
       <origin rpy="0 0 0" xyz="0 0 0"/>
       <mass value=".10"/>
       <inertia ixx="4.11e-13" ixy="0" ixz="0"
           iyy="4.11e-13" iyz="0.0"
          izz="4.11e-13"/>

   </inertial>
</link>



<joint name="back_right_casterWheel_to_base_link" type="continuous">
<parent link="base_link"/>
<child link="back_right_casterWheel"/>
<axis xyz="0 0 1"/>
<origin xyz="-0.2665 -0.132 -0.0725" rpy="1.5708 0 0"/>
</joint >

<link name="back_right_casterWheel">
     <collision>
       <geometry>
           <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
     </collision>
 <visual>
       <geometry>
       <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
   <material name="white"/>
   </visual>

     <inertial>
       <origin rpy="0 0 0" xyz="0 0 0"/>
       <mass value=".10"/>
       <inertia ixx="4.11e-13" ixy="0" ixz="0"
           iyy="4.11e-13" iyz="0.0"
          izz="4.11e-13"/>

   </inertial>
</link>

<joint name="front_right_casterWheel_to_base_link" type="continuous">
<parent link="base_link"/>
<child link="front_right_casterWheel"/>
<axis xyz="0 0 1"/>
 <origin xyz="0.2665 -0.132 -0.0725" rpy="1.5708 0 0"/>
</joint >

<link name="front_right_casterWheel">
     <collision>
       <geometry>
           <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
     </collision>
 <visual>
       <geometry>
       <sphere radius="0.019"/>
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
   <material name="white"/>
   </visual>

     <inertial>
       <origin rpy="0 0 0" xyz="0 0 0"/>
       <mass value=".10"/>
       <inertia ixx="4.11e-13" ixy="0" ixz="0"
           iyy="4.11e-13" iyz="0.0"
          izz="4.11e-13"/>

   </inertial>
</link>

<gazebo reference="front_right_casterWheel">
  <mu1>1</mu1>
  <mu2>1</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>0 0 0</fdir1>
  <material>Gazebo/Black</material>
</gazebo>
<gazebo reference="back_right_casterWheel">
  <mu1>1</mu1>
  <mu2>1</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>0 0 0</fdir1>
  <material>Gazebo/Black</material>
</gazebo>
<gazebo reference="back_left_casterWheel">
  <mu1>1</mu1>
  <mu2>1</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>0 0 0</fdir1>
  <material>Gazebo/Black</material>
</gazebo>

<gazebo reference="front_left_casterWheel">
  <mu1>1</mu1>
  <mu2>1</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>0 0 0</fdir1>
  <material>Gazebo/Black</material>
</gazebo>
<gazebo reference="base_link">
  <mu1>1000</mu1>
  <mu2>1000</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>0 0 0</fdir1>

</gazebo>

<gazebo reference="right_mWheel">
  <mu1>1000</mu1>
  <mu2>1000</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>1 1 1</fdir1>
  <material>Gazebo/Black</material>
</gazebo>
<gazebo reference="left_mWheel">
  <mu1>1000</mu1>
  <mu2>1000</mu2>
  <kp>10000000.0</kp>
  <kd>100.0</kd>
  <minDepth>0.001</minDepth>
  <maxVel>3000</maxVel>
  <fdir1>1 1 1</fdir1>
  <material>Gazebo/Black</material>
</gazebo>

<!--  -->

    <joint name="lidar_to_base_base_link" type="fixed">
      <parent link="base_link"/>
      <child link="os_sensor"/>
  <origin rpy="0 0 0" xyz="0 0 0.1"/>
    </joint>
<link name="os_sensor">
    </link>






 <gazebo reference="os_sensor">
        <sensor type="ray" name="Velodyne-HDL32E">
          <pose>0 0 0 0 0 0</pose>
          <visualize>true</visualize>
          <update_rate>15</update_rate>
          <ray>
            <scan>
              <horizontal>
                <samples>10</samples>
                <resolution>1</resolution>
                <min_angle>-1.57</min_angle>
                <max_angle>1.57</max_angle>
              </horizontal>
              <vertical>
                <samples>32</samples>
                <resolution>1</resolution>
                <min_angle>0.0</min_angle>
                <max_angle>0.38</max_angle>
              </vertical>
            </scan>
            <range>
              <min>0.9</min>
              <max>10</max>
              <resolution>1</resolution>
            </range>
            <noise>
              <type>gaussian</type>
              <mean>0.0</mean>
              <stddev>0.0</stddev>
            </noise>
          </ray>
          <!--plugin name="gazebo_ros_laser_controller" filename="libgazebo_ros_velodyne_laser.so">
            <topicName>scan_cloud</topicName>
            <frameName>lidar_link</frameName>
            <organize_cloud>${organize_cloud}</organize_cloud>
            <min_range>0.9</min_range>
            <max_range>10</max_range>
            <gaussianNoise>0</gaussianNoise>
          </plugin-->
        </sensor>

    </gazebo>






<!--  -->

<link name="os_imu">
</link>


<joint name="os_imu_to_base_base_link" type="fixed">
<parent link="os_sensor"/>
<child link="os_imu"/>
 <origin rpy="0 0 0" xyz="0 0 0"/>
</joint>

                    <gazebo reference="os_imu">
                      <gravity>true</gravity>
                      <sensor name="imu_sensor" type="imu">
                        <always_on>true</always_on>
                        <update_rate>50</update_rate>
                        <visualize>true</visualize>
                        <topic>__default_topic__</topic>
                        <!--plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
                          <topicName>imu</topicName>
                          <bodyName>os_imu</bodyName>
                          <updateRateHZ>60</updateRateHZ>
                          <gaussianNoise>0.0</gaussianNoise>
                          <xyzOffset>0 0 0</xyzOffset>
                          <rpyOffset>0 0 0</rpyOffset>
                          <frameName>os_imu</frameName>
                        </plugin-->
                        <pose>0 0 0 0 0 0</pose>
                      </sensor>
                    </gazebo>



<link name="imu_link">
</link>


<joint name="imu_to_base_base_link" type="fixed">
<parent link="os_sensor"/>
<child link="imu_link"/>
 <origin rpy="0 0 0" xyz="0 0 0"/>
</joint>

                    <gazebo reference="imu_link">
                      <gravity>true</gravity>
                      <sensor name="imu_sensor" type="imu">
                        <always_on>true</always_on>
                        <update_rate>50</update_rate>
                        <visualize>true</visualize>
                        <topic>__default_topic__</topic>
                        <!--plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
                          <topicName>imu</topicName>
                          <bodyName>os_imu</bodyName>
                          <updateRateHZ>60</updateRateHZ>
                          <gaussianNoise>0.0</gaussianNoise>
                          <xyzOffset>0 0 0</xyzOffset>
                          <rpyOffset>0 0 0</rpyOffset>
                          <frameName>os_imu</frameName>
                        </plugin-->
                        <pose>0 0 0 0 0 0</pose>
                      </sensor>
                    </gazebo>

                    <!-- differential drive -->

         <gazebo>
         <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
           <commandTopic>cmd_vel</commandTopic>
           <rosDebugLevel>Debug</rosDebugLevel>
           <odometryTopic>odom</odometryTopic>
           <odometryFrame>odom</odometryFrame>
           <robotBaseFrame>base_footprint</robotBaseFrame>
           <publishWheelTF>false</publishWheelTF>
           <publishWheelJointState>false</publishWheelJointState>
           <legacyMode>false</legacyMode>
           <updateRate>60</updateRate>
           <alwaysOn>true</alwaysOn>
           <leftJoint>left_mWheel_to_base_link</leftJoint>
           <rightJoint>right_mWheel_to_base_link</rightJoint>
           <wheelSeparation>0.320</wheelSeparation>
           <wheelDiameter>0.120</wheelDiameter>
           <wheelAcceleration>10</wheelAcceleration>
           <wheelTorque>1000</wheelTorque>
         </plugin>
        </gazebo>
<!--fr  -->

<!-- br -->

   <!--/gazebo-->
<!--  -->
</robot>
